<div class="row variablerow">
	<div class="col-md-6 col-md-offset-3" style="text-align:center;">
		<div class="col-md-6" style="text-align:center;">
			<h2 class="text-center">{{ values['nvar'] }}</h2>
			<p style="text-align:center;line-height:1">Columns</p>
		</div>
		<div class="col-md-6" style="text-align:center;">
			<h2 class="text-center">{{ values['n'] }}</h2>
			<p style="text-align:center;line-height:1">Rows</p>
		</div>
		<div class="col-md-4 col-md-offset-3">
			<br/>
			<script>
				d3.select("#statsToggle").attr("data-target", "#stats"+id).attr("id", "statsToggle"+id);
				d3.select("#stats").attr("id", "stats"+id);
			</script>
			<div class="panel-heading" style="width: 260px">
				<p style="text-align:center;font-size:13px">More Info <button id="statsToggle" data-toggle="collapse" data-target="#stats" class="collapseButton btn btn-xs btn-secondary btn-hover-dark collapsed"></button></p>
			</div>
			<div id="stats" class="pannel-collapse list-unstyled collapse" style="width: 260px">
				<table class="stats" style="width: 260px;">
					<tbody>
						<tr>
							<th style="width: 210px;">Total size in memory</th>
							<td style="width: 50px;">{{ values['memsize'] }} </td>
						</tr>
						<tr>
							<th style="width: 210px;">Average record size in memory</th>
							<td style="width: 50px;">{{ values['recordsize'] }} </td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
<div class="row variablerow">
	<div class="col-md-6 row col-md-offset-3">
        <p class="h4" style="text-align:center;">Variables Types</p>
		<div class="col-sm-12">
			<svg class="VariableTypesChart">
				<script>
					var data = [
						{name: "Numeric", number: {{ values['NUM'] }}}, 
						{name: "Categorical", number: {{ values['CAT'] }}}, 
						{name: "Boolean", number: {{ values['BOOL'] }}}, 
						{name: "Date", number: {{ values['DATE'] }}}, 
						{name: "Text (Unique)", number: {{ values['UNIQUE'] }}}, 
						{name: "Rejected", number: {{ values['REJECTED'] }}}, 
						{name: "Unsupported", number: {{ values['UNSUPPORTED'] }}}
					];
					var svg = d3.select("svg.VariableTypesChart");
					svg.attr("class", "VariableTypesChart"+id);
					plotVaribleTypesChart(svg, data);
				</script>
			</svg>
		</div>
		<div class="col-sm-4" style="margin-left:60px">
			<table class="stats" style="margin-left: 1em;">
				<tbody class="variableTypesTableLeft">
					<script>
						var table = d3.select("tbody.variableTypesTableLeft");
						table.attr("class", "variableTypesTableLeft"+id);
						var color = d3.scaleOrdinal()
							.domain(data.map(d => d.name))
							.range(d3.quantize(t => d3.interpolateSpectral(t * 0.8 + 0.1), data.length).reverse());
						var join = table.selectAll("tr")
							.data(data.slice(0, 4))
							.join("tr");
						join.append("svg")
							.attr("width", 13)
							.attr("height", 13)
							.append("circle")
							.attr("cy", 6.5)
							.attr("cx", 6.5)
							.attr("r", 6)
							.attr("stroke", "black")
							.attr("stroke-width", 0.5)
							.attr("fill", d => color(d.name));
						join.append("th")
							.text(d => d.name);
						join.append("td")
							.text(d => d.number);
					</script>
				</tbody>
			</table>
		</div>
		<div class="col-sm-4">
			<table class="stats" style="margin-left: 1em;">
				<tbody class="variableTypesTableRight">
					<script>
						var table = d3.select("tbody.variableTypesTableRight");
						table.attr("class", "variableTypesTableRight"+id);
						var join = table.selectAll("tr")
							.data(data.slice(4, 7))
							.join("tr");
						join.append("svg")
							.attr("width", 13)
							.attr("height", 13)
							.append("circle")
							.attr("cy", 6.5)
							.attr("cx", 6.5)
							.attr("r", 6)
							.attr("stroke", "black")
							.attr("stroke-width", 0.5)
							.attr("fill", d => color(d.name));
						join.append("th")
							.text(d => d.name);
						join.append("td")
							.text(d => d.number);
					</script>
				</tbody>
			</table>
		</div>
	</div>
</div>
<div class="row variablerow">
    <div class="col-md-6" style="padding-left: 1em;">
		<p class="h4">Missing Values</p>
        <svg class="MissingValuesBar">
			<script>
				var svg = d3.select("svg.MissingValuesBar");
				svg.attr("class", "MissingValuesBar"+id);
				plotMissingValuesBar(svg, "{{ values['total_missing'] }}", 300, 50);
			</script>
		</svg>
		<p>Explore missing data? <a>Yes, open Viz</a></p>
    </div>
	<div class="col-md-6" style="padding-left: 1em;">
		<p class="h4" style="font-size:14px">Breakdown of Types</p>
		<table class="stats" style="width: 100px">
			<tr>
				<th>na</th>
				<td>xx</td>
			</tr>
			<tr>
				<th>NA</th>
				<td>xx</td>
			</tr>
			<tr>
				<th>?</th>
				<td>xx</td>
			</tr>
			<tr>
				<th>Empty</th>
				<td>xx</td>
			</tr>
			<tr>
				<th>Null</th>
				<td>xx</td>
			</tr>
		</table>
	</div>
    {% if messages %}
</div>
<div class="row variablerow">
	<script>
		d3.select("#warningsToggle").attr("data-target", "#warnings"+id).attr("id", "warningsToggle"+id);
		d3.select("#warnings").attr("id", "warnings"+id);
	</script>
    <div class="col-md-6" style="padding-left: 1em;">
		<div class="panel-heading">
			<p class="h4">Warnings <button id="warningsToggle" data-toggle="collapse" data-target="#warnings" class="collapseButton btn btn-xs btn-secondary btn-hover-dark collapsed"></button></p>
		</div>
		<ul id="warnings" class="pannel-collapse list-unstyled collapse">{{ messages }} </ul>
    </div>
	<script>
		d3.select("#recommendationsToggle").attr("data-target", "#recommendations"+id).attr("id", "recommendationsToggle"+id);
		d3.select("#recommendations").attr("id", "recommendations"+id);
	</script>
    <div class="col-md-6" style="padding-left: 1em;">
        <div class="panel-heading">
			<p class="h4">Recommendations <button id="recommendationsToggle" data-toggle="collapse" data-target="#recommendations" class="collapseButton btn btn-xs btn-secondary btn-hover-dark collapsed"></button></p>
		</div>
		<ul id="recommendations" class="pannel-collapse list-unstyled collapse">
			<li>Which are good practices for data wrangling?</li>
			<li>Based on warnings what would be the next steps?</li>
			<li>*Recommendations to be added</li>
		</ul>
    </div>
    {% endif %}
</div>